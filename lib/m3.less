// Temporary helper function, replace later
#__m3-rgb(@id, @color) {
  --@{id}: @color;
  --@{id}-rgb: #rgbify(@color) [];
}

// TODO: Run fmt pass

#__m3_color_system(@prefix) {
  #__m3-rgb(@{prefix}-
    background,
    @base
    );
  #__m3-rgb(@{prefix}-
    error,
    @red
    );
  #__m3-rgb(@{prefix}-
    error-container,
    fade(@red, @tint)
    );
  #__m3-rgb(@{prefix}-
    inverse-on-surface,
    @base
    );
  #__m3-rgb(@{prefix}-
    inverse-primary,
    @catppuccin[@@inverse-theme][@@primary]
    );
  #__m3-rgb(@{prefix}-
    inverse-surface,
    @text
    );
  #__m3-rgb(@{prefix}-
    on-background,
    @text
    );
  #__m3-rgb(@{prefix}-
    on-error,
    @base
    );
  #__m3-rgb(@{prefix}-
    on-error-container
    ,
    lighten(@red, @emphasize)
    );
  #__m3-rgb(@{prefix}-
    on-primary
    ,
    @base
    );
  #__m3-rgb(@{prefix}-
    on-primary-container
    ,
    lighten(@primary, @emphasize)
    );
  #__m3-rgb(@{prefix}-
    on-primary-fixed
    ,
    @catppuccin[@mocha][@base]
    );
  #__m3-rgb(@{prefix}-
    on-primary-fixed-variant
    ,
    @catppuccin[@mocha][@base]
    );
  #__m3-rgb(@{prefix}-
    on-secondary
    ,
    @base
    );
  #__m3-rgb(@{prefix}-
    on-secondary-container
    ,
    lighten(@secondary, @emphasize) 
    );
  #__m3-rgb(@{prefix}-
    on-secondary-fixed
    ,
    @catppuccin[@mocha][@base]
    );
  #__m3-rgb(@{prefix}-
    on-secondary-fixed-variant
    ,
    @catppuccin[@mocha][@base]
    );
  #__m3-rgb(@{prefix}-
    on-surface
    ,
    @text
    );
  #__m3-rgb(@{prefix}-
    on-surface-variant
    ,
    @subtext0
    );
  #__m3-rgb(@{prefix}-
    on-tertiary
    ,
    @base
    );
  #__m3-rgb(@{prefix}-
    on-tertiary-container
    ,
    lighten(@tertiary, @emphasize) 
    );
  #__m3-rgb(@{prefix}-
    on-tertiary-fixed
    ,
    @catppuccin[@mocha][@base]
    );
  #__m3-rgb(@{prefix}-
    on-tertiary-fixed-variant
    ,
    @catppuccin[@mocha][@base]
    );
  #__m3-rgb(@{prefix}-
    outline
    ,
    @overlay2
    );
  #__m3-rgb(@{prefix}-
    outline-variant
    ,
    @overlay0
    );
  #__m3-rgb(@{prefix}-
    primary
    ,
    @primary
    );
  #__m3-rgb(@{prefix}-
    primary-container
    ,
    fade(@primary, @tint)
    );
  #__m3-rgb(@{prefix}-
    primary-fixed
    ,
    @catppuccin[@mocha][@primary]
    );
  #__m3-rgb(@{prefix}-
    primary-fixed-dim
    ,
    darken(@catppuccin[@mocha][@primary], @deemphasize)
    );
  #__m3-rgb(@{prefix}-
    scrim
    ,
    @black
    );
  #__m3-rgb(@{prefix}-
    secondary
    ,
    @secondary
    );
  #__m3-rgb(@{prefix}-
    secondary-container
    ,
    fade(@secondary, @tint)
    );
  #__m3-rgb(@{prefix}-
    secondary-fixed
    ,
    @catppuccin[@mocha][@secondary]
    );
  #__m3-rgb(@{prefix}-
    secondary-fixed-dim
    ,
    darken(@catppuccin[@mocha][@secondary], @deemphasize)
    );
  #__m3-rgb(@{prefix}-
    shadow
    ,
    @black
    );
  #__m3-rgb(@{prefix}-
    surface
    ,
    @base
    );
  #__m3-rgb(@{prefix}-
    surface-bright
    ,
    @surface0
    );
  #__m3-rgb(@{prefix}-
    surface-container
    ,
    @surface0
    );
  #__m3-rgb(@{prefix}-
    surface-container-high
    ,
    @surface1
    );
  #__m3-rgb(@{prefix}-
    surface-container-highest
    ,
    @surface2
    );
  #__m3-rgb(@{prefix}-
    surface-container-low
    ,
    @mantle
    );
  #__m3-rgb(@{prefix}-
    surface-container-lowest
    ,
    @crust 
    );
  #__m3-rgb(@{prefix}-
    surface-dim
    ,
    @mantle
    );
  #__m3-rgb(@{prefix}-
    surface-tint
    ,
    @accent
    );
  #__m3-rgb(@{prefix}-
    surface-variant
    ,
    @overlay1
    );
  #__m3-rgb(@{prefix}-
    tertiary
    ,
    @tertiary
    );
  #__m3-rgb(@{prefix}-
    tertiary-container
    ,
    fade(@tertiary, @tint)
    );
  #__m3-rgb(@{prefix}-
    tertiary-fixed
    ,
    @catppuccin[@mocha][@tertiary]
    );
  #__m3-rgb(@{prefix}-
    tertiary-fixed-dim
    ,
    darken(@catppuccin[@mocha][@tertiary], @deemphasize)
    );
}
